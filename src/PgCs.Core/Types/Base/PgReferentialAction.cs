namespace PgCs.Core.Types.Base;

/// <summary>
/// Действие при нарушении ссылочной целостности (FOREIGN KEY)
/// </summary>
/// <remarks>
/// Определяет, что происходит с зависимыми строками при изменении/удалении
/// родительской строки в связи FOREIGN KEY.
/// </remarks>
public enum PgReferentialAction
{
    /// <summary>
    /// NO ACTION - не выполнять никаких действий (отложенная проверка)
    /// </summary>
    /// <remarks>
    /// - Проверка выполняется в конце транзакции
    /// - Даёт возможность исправить нарушение до коммита
    /// - Значение по умолчанию в PostgreSQL
    /// - Отличается от RESTRICT только временем проверки
    /// </remarks>
    NoAction,

    /// <summary>
    /// RESTRICT - запретить удаление/изменение (немедленная проверка)
    /// </summary>
    /// <remarks>
    /// - Проверка выполняется немедленно
    /// - Операция отменяется сразу при обнаружении нарушения
    /// - Не позволяет изменить/удалить родительскую строку пока есть зависимые
    /// </remarks>
    Restrict,

    /// <summary>
    /// CASCADE - каскадное удаление/изменение связанных записей
    /// </summary>
    /// <remarks>
    /// - При удалении родительской строки удаляются все зависимые
    /// - При изменении ключа в родительской строке обновляются все зависимые
    /// - Осторожно: может удалить много данных!
    /// </remarks>
    Cascade,

    /// <summary>
    /// SET NULL - установить NULL в связанных записях
    /// </summary>
    /// <remarks>
    /// - При удалении/изменении родительской строки внешний ключ становится NULL
    /// - Требует, чтобы колонка внешнего ключа допускала NULL
    /// </remarks>
    SetNull,

    /// <summary>
    /// SET DEFAULT - установить значение по умолчанию в связанных записях
    /// </summary>
    /// <remarks>
    /// - При удалении/изменении родительской строки устанавливается DEFAULT значение
    /// - Требует, чтобы у колонки было определено DEFAULT значение
    /// </remarks>
    SetDefault
}
