namespace PgCs.Core.Types.Base;

/// <summary>
/// Время срабатывания триггера относительно операции DML
/// </summary>
public enum PgTriggerTiming
{
    /// <summary>
    /// BEFORE - триггер срабатывает ДО выполнения операции
    /// </summary>
    /// <remarks>
    /// - Может изменить или отменить операцию
    /// - Имеет доступ к NEW (новые значения) и OLD (старые значения)
    /// - Может изменить значения в NEW перед записью
    /// - Используется для валидации и трансформации данных
    /// </remarks>
    Before,

    /// <summary>
    /// AFTER - триггер срабатывает ПОСЛЕ выполнения операции
    /// </summary>
    /// <remarks>
    /// - Операция уже выполнена и зафиксирована
    /// - Не может изменить данные операции
    /// - Используется для аудита, логирования, синхронизации
    /// - Может вызывать другие операции DML
    /// </remarks>
    After,

    /// <summary>
    /// INSTEAD OF - триггер ЗАМЕНЯЕТ собой операцию
    /// </summary>
    /// <remarks>
    /// - Используется только для представлений (VIEW)
    /// - Позволяет делать представления обновляемыми
    /// - Полностью контролирует логику операции
    /// </remarks>
    InsteadOf
}
